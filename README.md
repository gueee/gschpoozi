# gschpoozi

> A simple, wizard-based Klipper configuration generator.

---

## ğŸ‰ Almost Fully Functional!

The wizard is now **almost fully functional** and ready for real-world testing. Most features work as intended, and we're actively fixing bugs as they're reported.

**Found a bug?** Please [file an issue](https://github.com/gm-tc-collaborators/gschpoozi/issues/new/choose) using our issue templates. Include:
- What you were trying to do
- What happened instead
- Your board/hardware setup
- Any error messages

**Before using generated configs:**
- Review generated files and verify pin assignments match your wiring
- Backup your existing printer.cfg
- Test with `STEPPER_BUZZ` before homing
- Be ready to hit emergency stop on first home

**Current Status:**
- âœ… Full wizard flow working (MCU, kinematics, steppers, extruder, bed, fans, probe, etc.)
- âœ… Smart pin conflict detection â€” prevents assigning the same port twice
- âœ… Pin capability filtering â€” heater ports show outputs, thermistors show ADC pins
- âœ… Klipper component management (install/update/remove Klipper, Moonraker, Mainsail, etc.)
- âœ… KlipperScreen integration (install, configure, remove)
- âœ… CAN bus setup wizard
- âœ… TMC Autotune integration with motor database picker
- âœ… Config generation with proper pin mappings
- âœ… Probe temperature sensors (Beacon/Cartographer/Eddy coil temp, PINDA)
- âš ï¸ Stepper/motor discovery is informational only â€” you need to know your wiring
- âš ï¸ Macro defaults may need tuning for your specific printer

---

**gschpoozi** makes setting up Klipper easy. Instead of copying and editing complex config files, run the wizard, answer questions about your printer, and get a clean, working configuration.

Inspired by [Klippain](https://github.com/Frix-x/klippain), but built from the ground up with simplicity as the #1 priority.

## Features

- **Interactive Wizard** - Step-by-step setup, no config editing required
- **Port-Based Hardware Setup** - Visual pin assignment for any board
- **Smart Pin Management** - Prevents conflicts, filters by capability (ADC, PWM, etc.)
- **Clean Output** - Generates readable, well-commented config files
- **Safe Updates** - Your customizations are never overwritten
- **Modular Design** - Only generates what you actually need

## Quick Start

```bash
# 1. Clone the repository
cd ~ && git clone https://github.com/gm-tc-collaborators/gschpoozi.git

# 2. Run the configuration wizard
~/gschpoozi/scripts/configure.sh

# 3. Follow the prompts to configure your printer

# 4. Done! Your config is ready in ~/printer_data/config/
```

## How It Works

The wizard guides you through your hardware setup:

1. **Toolhead Board** - Optional (EBB36, SHT36, etc.)
2. **Kinematics** - CoreXY, Cartesian + Z motor count
3. **Stepper Drivers** - Per-axis driver selection
4. **Main Board** - Controller board with port assignment
5. **Extruder, Bed, Probe** - Temperature and sensor config
6. **Extras** - Filament sensor, LEDs, chamber heating

Then generates clean config files:

```
~/printer_data/config/
â”œâ”€â”€ printer.cfg           # Your file - includes + overrides + SAVE_CONFIG
â””â”€â”€ gschpoozi/            # Generated configs (managed by wizard)
    â”œâ”€â”€ hardware.cfg      # MCU, steppers, heaters, fans
    â”œâ”€â”€ macros.cfg        # PRINT_START, PRINT_END, etc.
    â””â”€â”€ homing.cfg        # Homing and bed mesh
```

## File Structure

**`printer.cfg`** - Your main config file. This is where you:
- Add the `[include gschpoozi/...]` lines
- Put your overrides and customizations
- Klipper writes `SAVE_CONFIG` here

**`gschpoozi/` folder** - Generated by the wizard. Contains:
- Hardware definitions (pins, steppers, heaters)
- Macros (PRINT_START, PRINT_END, etc.)
- Homing routines

## Documentation

For complete documentation, see:
- **[Usage Manual](docs/USAGE.md)** - Detailed guide for all wizard options
- **[Klipper Config Guidelines](KLIPPER_CONFIG_GUIDELINES.md)** - Klipper syntax reference

## Automatic Updates

The wizard automatically adds gschpoozi to your Moonraker Update Manager. After setup, you'll see gschpoozi in your update list and can update it like any other component.

Updates only affect the gschpoozi repository itself. Your generated configs and `printer.cfg` are **never overwritten**.

**If Update Manager hangs or doesn't show updates**, use manual update:
```bash
cd ~/gschpoozi && git pull
```

See [Troubleshooting](docs/USAGE.md#update-manager-issues) for more options.

## Re-running the Wizard

Need to change something? Just run the wizard again:

```bash
~/gschpoozi/scripts/configure.sh
```

Your previous selections are saved, so you can quickly adjust and regenerate.

## Customization

Add your customizations to `printer.cfg` after the includes:

```ini
[include gschpoozi/hardware.cfg]
[include gschpoozi/macros.cfg]
[include gschpoozi/homing.cfg]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# YOUR OVERRIDES BELOW
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[extruder]
pressure_advance: 0.045    # Your calibrated value

[gcode_macro PRINT_START]
variable_my_var: 100       # Add your own variables
```

## Supported Hardware

**28 Controller Boards** including:
- BTT Octopus v1.1/Pro, Manta M8P/M5P, SKR 3/Mini E3, Kraken
- Mellow Fly Super8, Gemini v3
- Fysetc Spider v2.2
- And more...

**17 Toolhead Boards** including:
- BTT EBB36/42, EBB SB2209/2240
- Mellow SHT36/42, Fly SB2040
- LDO Nitehawk SB/36
- Orbiter Orbitool SO3

**Probes**: Beacon, Cartographer, BTT Eddy, BLTouch, Klicky, Inductive, Tap

**Kinematics**: CoreXY, CoreXY AWD, Cartesian, CoreXZ

See [Usage Manual](docs/USAGE.md) for complete hardware list.

## Reporting Issues

Found a bug or have a feature request? Please use our issue templates:

- **ğŸ› [Bug Report](https://github.com/gm-tc-collaborators/gschpoozi/issues/new?template=bug_report.md)** - Something isn't working
- **âœ¨ [Feature Request](https://github.com/gm-tc-collaborators/gschpoozi/issues/new?template=feature_request.md)** - Suggest an improvement
- **ğŸ”§ [Hardware Request](https://github.com/gm-tc-collaborators/gschpoozi/issues/new?template=hardware_request.md)** - Request support for a new board/probe/extruder

## Contributing

Contributions are welcome! Feel free to:
- Add support for new boards
- Improve the wizard
- Add new macro templates
- Fix bugs

## License

GPL-3.0 - See [LICENSE](LICENSE)
