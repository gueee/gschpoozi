# WARNING. DO NOT EDIT THIS FILE.
# To override settings from this file, you can copy and paste the relevant
# sections into your printer.cfg and change it there.

[stepper_x]
position_max: 300

[stepper_y]
position_max: 300

[stepper_z]
position_max: 300

[bed_mesh]
speed: 180
horizontal_move_z: 5
mesh_min: 20,20
mesh_max:265,260
probe_count: 7,7
fade_start: 1.0
fade_end: 10.0
mesh_pps: 2,2
algorithm: bicubic
bicubic_tension: .2

[z_tilt]
z_positions:
	0,0
	150,300
	300,0

points:
	60,60
	185,270
	260,60
		
speed: 180
horizontal_move_z: 12
retries: 10
retry_tolerance: 0.02

# WARNING. DO NOT EDIT THIS FILE.
# To override settings from this file, you can copy and paste the relevant
# sections into your printer.cfg and change it there.
# based on the following stepper connections - from left to right:
# X Y E Z Z1 Z2
# In the wiring diagram, the Z-steppers are called Z1, Z2, Z3, here they're mapped to z, z1, z2 respectively.

[stepper_x]
step_pin: PE9
dir_pin: !PF1
enable_pin: !PF2
rotation_distance: 40
microsteps: 16
homing_speed: 50
homing_retract_dist: 0

[stepper_y]
step_pin: PE11
dir_pin: PE8
enable_pin: !PD7
rotation_distance: 40
microsteps: 16
homing_speed: 50
homing_retract_dist: 0

[stepper_z]
endstop_pin: probe:z_virtual_endstop
step_pin: PE14
dir_pin: PA0
enable_pin: !PC3
rotation_distance: 4
microsteps: 16
position_min: -5 # Needed for z-offset calibration and tilt_adjust.
homing_speed: 10

[stepper_z1]
step_pin: PD15
dir_pin: PE7
enable_pin: !PA3
rotation_distance: 4
microsteps: 16

[stepper_z2]
step_pin: PD13
dir_pin: PG9
enable_pin: !PF0
rotation_distance: 4
microsteps: 16

[extruder]
step_pin: PE13
dir_pin: !PC2
enable_pin: !PC0
microsteps: 16

[tmc2209 stepper_x]
uart_pin: PC13
run_current: 1.1
hold_current: 0.500
stealthchop_threshold: 900

[tmc2209 stepper_y]
uart_pin: PE3
run_current: 1.1
hold_current: 0.500
stealthchop_threshold: 900

[tmc2209 extruder]
uart_pin: PE1
run_current: 0.5
hold_current: 0.400
stealthchop_threshold: 900

[tmc2209 stepper_z]
uart_pin: PD4
run_current: 1.0
hold_current: 0.500
stealthchop_threshold: 900

[tmc2209 stepper_z1]
uart_pin: PD1
run_current: 1.1
hold_current: 0.500
stealthchop_threshold: 900

[tmc2209 stepper_z2]
uart_pin: PD6
run_current: 1.0
hold_current: 0.500
stealthchop_threshold: 900
# WARNING. DO NOT EDIT THIS FILE.
# To override settings from this file, you can copy and paste the relevant
# sections into your printer.cfg and change it there.

[gcode_macro PAUSE]
rename_existing: BASE_PAUSE
default_parameter_Z: 10  
default_parameter_E: 0.6
gcode:
    SAVE_GCODE_STATE NAME=PAUSE_state
    BASE_PAUSE
    G91
    G1 E-{E} F2100
    G1 Z{Z}
    G90
    G1 X{printer.toolhead.axis_maximum.x / 2} Y{printer.toolhead.axis_maximum.y} F6000

[gcode_macro RESUME]
rename_existing: BASE_RESUME
default_parameter_E: 0.6
gcode:
    G91
    G1 E{E} F2100
    G90
    RESTORE_GCODE_STATE NAME=PAUSE_state MOVE=1
    BASE_RESUME

[gcode_macro CANCEL_PRINT]
rename_existing: BASE_CANCEL_PRINT
gcode:
    END_PRINT
    TURN_OFF_HEATERS
    CLEAR_PAUSE
    SDCARD_RESET_FILE
    BASE_CANCEL_PRINT