#######################################
# MCU, steppers, extruder, bed, fans
# Generated by gschpoozi v2.0
# 2025-12-21 11:00:20
#
# DO NOT EDIT - Changes will be overwritten
# Use user-overrides.cfg for customizations
#######################################

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32h723xx_240041000451323336333538-if00

[mcu toolboard]
serial: /dev/serial/by-id/usb-Klipper_stm32f042x6_SO3TOOL-if00

[mcu rpi]
serial: /tmp/klipper_host_mcu
[printer]
kinematics: corexy
max_velocity: 800
max_accel: 15000
max_z_velocity: 15
max_z_accel: 350
square_corner_velocity: 5.0

[stepper_x]
step_pin: PE0
dir_pin: !PG3
enable_pin: !PG4
rotation_distance: 40
microsteps: 32
full_steps_per_rotation: 200
endstop_pin: toolboard:PB0
position_endstop: -4
# Klipper requires position_endstop to be between position_min and position_max.
# When position_min is missing, only default it to position_endstop if the endstop is negative
# (common for wipe zones). Otherwise default to 0 to avoid unintentionally shrinking travel.
position_min: -4
position_max: 335
homing_speed: 50
# Allow explicit 0 (required for some probe/virtual-endstop homing behaviors)
homing_retract_dist: 5.0

[tmc5160 stepper_x]
cs_pin: PG2
spi_software_miso_pin: PB4
spi_software_mosi_pin: PB5
spi_software_sclk_pin: PB3
run_current: 1.7
interpolate: false
sense_resistor: 0.075
driver_tbl: 1
driver_toff: 3
driver_diss2g: 1
driver_diss2vs: 1

[stepper_x1]
step_pin: PE15
dir_pin: !PE11
enable_pin: !PF2
rotation_distance: 40
microsteps: 32
full_steps_per_rotation: 200
[tmc5160 stepper_x1]
cs_pin: PE10
spi_software_miso_pin: PB4
spi_software_mosi_pin: PB5
spi_software_sclk_pin: PB3
run_current: 1.7
interpolate: false
sense_resistor: 0.075
driver_tbl: 1
driver_toff: 3
driver_diss2g: 1
driver_diss2vs: 1

[stepper_y]
step_pin: PE1
dir_pin: !PF0
enable_pin: !PC15
rotation_distance: 40
microsteps: 32
full_steps_per_rotation: 200
endstop_pin: PG12
position_endstop: 0
# Klipper requires position_endstop to be between position_min and position_max.
# When position_min is missing, only default it to position_endstop if the endstop is negative
# (common for wipe zones). Otherwise default to 0 to avoid unintentionally shrinking travel.
position_min: 0
position_max: 315
homing_speed: 50
# Allow explicit 0 (required for some probe/virtual-endstop homing behaviors)
homing_retract_dist: 5.0

[tmc5160 stepper_y]
cs_pin: PF1
spi_software_miso_pin: PB4
spi_software_mosi_pin: PB5
spi_software_sclk_pin: PB3
run_current: 1.7
interpolate: false
sense_resistor: 0.075
driver_tbl: 1
driver_toff: 3
driver_diss2g: 1
driver_diss2vs: 1

[stepper_y1]
step_pin: PE14
dir_pin: !PE8
enable_pin: !PE9
rotation_distance: 40
microsteps: 32
full_steps_per_rotation: 200
[tmc5160 stepper_y1]
cs_pin: PE7
spi_software_miso_pin: PB4
spi_software_mosi_pin: PB5
spi_software_sclk_pin: PB3
run_current: 1.7
interpolate: false
sense_resistor: 0.075
driver_tbl: 1
driver_toff: 3
driver_diss2g: 1
driver_diss2vs: 1

[stepper_z]
step_pin: PE2
dir_pin: PC5
enable_pin: !PF11
rotation_distance: 4
microsteps: 32
full_steps_per_rotation: 200
endstop_pin: probe:z_virtual_endstop
position_min: -5
position_max: 340
homing_speed: 10
homing_retract_dist: 0
[tmc2209 stepper_z]
uart_pin: PC4
run_current: 0.8
interpolate: false
[extruder]
step_pin: toolboard:PB7
dir_pin: !toolboard:PB6
enable_pin: !toolboard:PB4
rotation_distance: 22.6789511
gear_ratio: 50:10
microsteps: 16
full_steps_per_rotation: 200
nozzle_diameter: 0.6
filament_diameter: 1.75
heater_pin: toolboard:PA0
max_power: 1.0
sensor_pin: ^toolboard:PA2
sensor_type: PT1000
pullup_resistor: 2200
min_temp: 0
max_temp: 350
min_extrude_temp: 170
max_extrude_only_distance: 150
max_extrude_cross_section: 5.0
pressure_advance: 0.04
pressure_advance_smooth_time: 0.040
# PID values - run PID_CALIBRATE HEATER=extruder TARGET=240
control: pid
pid_Kp: 0
pid_Ki: 0
pid_Kd: 0
[tmc2209 extruder]
uart_pin: toolboard:PB5
run_current: 0.6
interpolate: false
[heater_bed]
heater_pin: PE5
sensor_pin: PC1
sensor_type: Generic 3950
max_power: 1.0
min_temp: 0
max_temp: 120
# PID values - run PID_CALIBRATE HEATER=heater_bed TARGET=60
control: pid
pid_Kp: 0
pid_Ki: 0
pid_Kd: 0
[multi_pin RSCS]
pins: PA15, PB11

[multi_pin Radiator]
pins: PA2, PA3


[fan]
pin: PF8
max_power: 1.0
cycle_time: 0.01
hardware_pwm: false
shutdown_speed: 0.0
[heater_fan hotend_fan]
pin: PA0
heater: extruder
heater_temp: 50
fan_speed: 1.0

# Additional heater-controlled fans (Radiator, hotend_pump, etc.)
[heater_fan Radiator]
pin: multi_pin:Radiator
heater: extruder
heater_temp: 50.0
fan_speed: 1.0


[fan_generic Exhaust]
pin: PB10
max_power: 1.0
shutdown_speed: 0
kick_start_time: 0.1
off_below: 0.1

[fan_generic RSCS]
pin: multi_pin:RSCS
max_power: 1.0
shutdown_speed: 0
kick_start_time: 0.1
off_below: 0.1


[temperature_sensor mcu_temp]
sensor_type: temperature_mcu
sensor_mcu: mcu

[temperature_sensor host_temp]
sensor_type: temperature_host

[temperature_sensor toolboard_temp]
sensor_type: temperature_mcu
sensor_mcu: toolboard


[neopixel status_led]
pin: toolboard:PB8
chain_count: 1
color_order: GRB
initial_RED: 0.2
initial_GREEN: 0.2
initial_BLUE: 0.2


[filament_switch_sensor filament_sensor]
switch_pin: !PG11
pause_on_runout: true
runout_gcode:
    M117 Filament runout detected!
    PAUSE

