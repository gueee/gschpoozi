#######################################
# G-code macros
# Generated by gschpoozi v2.0
# 2025-12-20 08:24:39
#
# DO NOT EDIT - Changes will be overwritten
# Use user-overrides.cfg for customizations
#######################################

[gcode_macro _BED_MESH]
description: Run bed mesh with appropriate method for probe type
gcode:
    {% set cfg = printer["gcode_macro _MACRO_CONFIG"] %}
    {% set MODE = params.MODE|default("adaptive")|lower %}

    {% if MODE == "none" %}
        M117 Skipping mesh
    {% elif MODE == "saved" %}
        BED_MESH_PROFILE LOAD=default
    {% elif cfg.probe_type in ['beacon', 'cartographer', 'btt_eddy'] %}
        # Eddy probes use rapid_scan or scan method
        BED_MESH_CALIBRATE METHOD={cfg.eddy_mesh_method}
    {% else %}
        # Standard probes
        BED_MESH_CALIBRATE
    {% endif %}
